fragment CheckoutProduct on ProductVariant {
  product {
    id
    name
    slug
  }
}

query GetCheckoutInfo($checkoutToken: UUID!) {
  checkout(token: $checkoutToken) {
    lines {
      id
      quantity
      variant {
        ...GenericProductVariant
        ...CheckoutProduct
      }
    }
  }
}

mutation CreateCheckout($channel: String!, $email: String!) {
  checkoutCreate(input: { channel: $channel, email: $email, lines: [] }) {
    checkout {
      token
    }
    errors {
      field
      code
    }
  }
}

mutation AddProductToCart($checkoutToken: UUID!, $variantId: ID!) {
  checkoutLinesAdd(
    token: $checkoutToken
    lines: [{ quantity: 1, variantId: $variantId }]
  ) {
    checkout {
      id
    }
    errors {
      message
    }
  }
}
